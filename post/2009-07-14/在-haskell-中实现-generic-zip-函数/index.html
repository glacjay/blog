<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.32.2" />

  <title>在 Haskell 中实现 Generic zip 函数 &middot; Random Stuff from GlacJAY</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  

  <link rel="shortcut icon" href="https://blog.glacjay.info/img/favicon.ico" type="image/x-icon" />

  
    <link rel="stylesheet" href="https://blog.glacjay.info/glacjay.css">
  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/">GlacJAY</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>归档</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/tags/"><i class='fa fa-tags fa-fw'></i>标签</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/glacjay" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/glacjay" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>在 Haskell 中实现 Generic zip 函数</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2009-07-14 00:00</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://blog.glacjay.info/tags/haskell">haskell</a>
    
  </div>
  
  

</div>

  <p>其实嗫，这个问题已经有标准和其他的解决方案了。标准解决方案参见 <code>Control.Applicative</code> 中的 <code>ZipList</code> ，不过这东东用起来蛮麻烦的说；其他解决方案见 bff 库的 <code>Data.Zippable</code> 模块，嗯，我还没搞明白这玩意怎么用，不过总感觉杀鸡用牛刀了有点（Template Haskell ，以及其他依赖）。</p>

<p>所以，如果你只是跟我一样，看 <code>Data.List</code> 中的那一砣 <code>zipn</code> 不顺眼的话（其实也只是看着不顺哈，用着还是蛮顺的，反正实现不用我写），一个更简单的方案在此：</p>

<p></p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style=";border-spacing:0;padding:0;margin:0;border:0;width:100%;overflow:auto;display:block;"><tr><td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">1</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">2</span></code></pre></td>
<td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#555">&gt;</span> <span style="color:#c0f">z</span> <span style="color:#000;font-weight:bold">::</span> [<span style="color:#c0f">a</span> <span style="color:#000;font-weight:bold">-&gt;</span> <span style="color:#c0f">b</span>] <span style="color:#000;font-weight:bold">-&gt;</span> [<span style="color:#c0f">a</span>] <span style="color:#000;font-weight:bold">-&gt;</span> [<span style="color:#c0f">b</span>]
<span style="color:#555">&gt;</span> <span style="color:#c0f">z</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#c0f">zipWith</span> (<span style="color:#555">$</span>)</code></pre></td></tr></table>
</div>
</div>
<p>吼吼，够简单的吧。其实这跟 <code>Control.Monad</code> 中的 <code>ap</code> 和 <code>Control.Applicative</code> 中的是一类东东啦，只不过是针对列表的 <code>zip</code> 功能滴。</p>

<p>那要怎么用嗫，也不是很麻烦啦，像这样就可以了：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style=";border-spacing:0;padding:0;margin:0;border:0;width:100%;overflow:auto;display:block;"><tr><td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">1</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">2</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">3</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">4</span></code></pre></td>
<td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#555">*</span><span style="color:#078;font-weight:bold">Main</span><span style="color:#555">&gt;</span> (,) `<span style="color:#c0f">map</span>` [<span style="color:#f60">1</span>,<span style="color:#f60">2</span>,<span style="color:#f60">3</span>] `<span style="color:#c0f">z</span>` <span style="color:#c30">&#34;abc&#34;</span>
[(<span style="color:#f60">1</span>,<span style="color:#c30">&#39;a&#39;</span>),(<span style="color:#f60">2</span>,<span style="color:#c30">&#39;b&#39;</span>),(<span style="color:#f60">3</span>,<span style="color:#c30">&#39;c&#39;</span>)]
<span style="color:#555">*</span><span style="color:#078;font-weight:bold">Main</span><span style="color:#555">&gt;</span> (,,) `<span style="color:#c0f">map</span>` [<span style="color:#f60">1</span>,<span style="color:#f60">2</span>,<span style="color:#f60">3</span>] `<span style="color:#c0f">z</span>` <span style="color:#c30">&#34;abc&#34;</span> `<span style="color:#c0f">z</span>` [<span style="color:#078;font-weight:bold">Nothing</span>, <span style="color:#078;font-weight:bold">Just</span> <span style="color:#078;font-weight:bold">False</span>, <span style="color:#078;font-weight:bold">Just</span> <span style="color:#078;font-weight:bold">True</span>]
[(<span style="color:#f60">1</span>,<span style="color:#c30">&#39;a&#39;</span>,<span style="color:#078;font-weight:bold">Nothing</span>),(<span style="color:#f60">2</span>,<span style="color:#c30">&#39;b&#39;</span>,<span style="color:#078;font-weight:bold">Just</span> <span style="color:#078;font-weight:bold">False</span>),(<span style="color:#f60">3</span>,<span style="color:#c30">&#39;c&#39;</span>,<span style="color:#078;font-weight:bold">Just</span> <span style="color:#078;font-weight:bold">True</span>)]</code></pre></td></tr></table>
</div>
</div>
<p>这里的 <code>map</code> 所对应的自然就是 <code>Control.Applicative</code> 中的啦。</p>

<p>还有更好玩的哦，如果再加上<a href="/post/2009-05-06/haskell-%E4%B8%AD%E7%9A%84%E5%8F%AF%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8/">上一篇博</a>中的不定参函数的话呢：</p>
<div class="highlight"><div style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style=";border-spacing:0;padding:0;margin:0;border:0;width:100%;overflow:auto;display:block;"><tr><td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">1</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">2</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">3</span><span style="color:#7f7f7f;margin-right:0.4em;padding:00.4em00.4em;display:block;">4</span></code></pre></td>
<td style=";vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#555">*</span><span style="color:#078;font-weight:bold">Main</span><span style="color:#555">&gt;</span> <span style="color:#c0f">buildList</span> `<span style="color:#c0f">map</span>` [<span style="color:#f60">1</span>,<span style="color:#f60">2</span>,<span style="color:#f60">3</span>] `<span style="color:#c0f">z</span>` [<span style="color:#f60">4</span>,<span style="color:#f60">5</span>,<span style="color:#f60">6</span>] <span style="color:#000;font-weight:bold">::</span> [[<span style="color:#078;font-weight:bold">Int</span>]]
[[<span style="color:#f60">1</span>,<span style="color:#f60">4</span>],[<span style="color:#f60">2</span>,<span style="color:#f60">5</span>],[<span style="color:#f60">3</span>,<span style="color:#f60">6</span>]]
<span style="color:#555">*</span><span style="color:#078;font-weight:bold">Main</span><span style="color:#555">&gt;</span> <span style="color:#c0f">buildList</span> `<span style="color:#c0f">map</span>` [<span style="color:#f60">1</span>,<span style="color:#f60">2</span>,<span style="color:#f60">3</span>] `<span style="color:#c0f">z</span>` [<span style="color:#f60">4</span>,<span style="color:#f60">5</span>,<span style="color:#f60">6</span>] `<span style="color:#c0f">z</span>` [<span style="color:#f60">7</span>,<span style="color:#f60">8</span>,<span style="color:#f60">9</span>] <span style="color:#000;font-weight:bold">::</span> [[<span style="color:#078;font-weight:bold">Int</span>]]
[[<span style="color:#f60">1</span>,<span style="color:#f60">4</span>,<span style="color:#f60">7</span>],[<span style="color:#f60">2</span>,<span style="color:#f60">5</span>,<span style="color:#f60">8</span>],[<span style="color:#f60">3</span>,<span style="color:#f60">6</span>,<span style="color:#f60">9</span>]]</code></pre></td></tr></table>
</div>
</div>
<p>那我这次要说得就这么多啦，至于怎么用，就请大家尽情地发挥你们的想象力吧（其实是我想象力不够 :-(）</p>

  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://blog.glacjay.info/post/2009-05-06/haskell-%E4%B8%AD%E7%9A%84%E5%8F%AF%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://blog.glacjay.info/post/2009-05-06/haskell-%E4%B8%AD%E7%9A%84%E5%8F%AF%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8/">Haskell 中的可变长参数列表</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://blog.glacjay.info/post/2009-12-05/%E4%BD%BF%E7%94%A8-visual-studio-2008-%E4%B8%BA-windows-ce-%E5%BC%80%E5%8F%91%E7%BC%96%E8%AF%91-openssl/">使用 Visual Studio 2008 为 Windows CE 开发编译 OpenSSL</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://blog.glacjay.info/post/2009-12-05/%E4%BD%BF%E7%94%A8-visual-studio-2008-%E4%B8%BA-windows-ce-%E5%BC%80%E5%8F%91%E7%BC%96%E8%AF%91-openssl/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'glacjay';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="https://blog.glacjay.info/js/ui.js"></script>






</body>
</html>

